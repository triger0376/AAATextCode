## 小程序生态设想
###  小程序商户应用管理平台---商户使用
针对小程序不同类型商户进行管理
1. 简单注册一个平台登陆账号
2. 入驻流程发起，商户自行填写信息，信息包括如下功能
* `商户申请小程序APPID 必须信息`
* `商户类型，根据类型发放对应的合约模版`

3. 商户的商品管理 （如果商户商品单一，只需要建立单品）
  * 新建商品单品（滑冰，游泳，舞蹈，消费券，体验券，）定义 单个商品服务价格
  * 新建综合商品  绑定卡类型（一种类型对应不同多种商品单品，或者对应一个）对不同类型卡定价（赋予不同体验次数和体验项目）计算出对应价值。 附加赠与属性，开启赠与，增加相关赠与项目。
  * 一种综合商品可以代表一张实体卡，可以克代表一个单品，也可以以套餐形式销售，看商户具体运营规则

4. 商户的卡管理
  * 商户类型卡类型管理（管理有多少种类的卡）
  * 商户实体卡绑定用户管理。（卡号和手机号以及实名绑定）
     * 售卖卡产生的数据 谁买的卡，谁买的卡，卡类型，卡号
   
5. 商户订单管理
  *  订单管理【支付，未支付，带分佣，已分佣】
     * 订单的数据分三种类型 【卡消费项目】，【单品凭消费】，【卡充值数据】
     * 卡消费，详细记录了 每一次项目
     * 无开卡人员体验单凭消费
     * 卡充值数据---购买综合商品产出卡充值数据 第一次购买会参数一条订单数据， 项目4中卡和用户的绑定数据， 二次购买就是充值数据
  * 订单成交管理
      * 在用户支付完成那一刻产生 一条订单成交记录 一条成交合格包括 （购买人，销售人，销售时间，销售金额，分佣金额）

6. 分佣管理体系
   * 销售人员管理
      * 人员信息
      * 销售商品管理 哪些人可以卖哪些商品。
      * 人员离职交接信息，
         * 离职交接那一刻立马结算已完成订单佣金，未完成订单交接与交接人。`预付卡的场景可能不会发生`
   * 商品单品项目--分佣体系
     * 百分比* 单品价 的方式分佣
     * 固定价格---按照单凭消费次数或消费时间
     * 以上规则可以根据运营方自己需求设置
   * 商品综合商品分佣设置 
     * 可以分用户第一次购买开卡分佣，充值分佣两种维度去设置 
   * 佣金审核管理
     * 根据 第五项成交管理分佣金额，以人员维度去管理分佣金额 管理， 审核通过自动发
     * 注：开卡分佣规则如果发生退卡，佣金退规则说明---
       1. 未发生消费而退卡，销售人员退还开卡佣金
       2. 发生消费退卡---销售人员退还开卡佣金 但 发放【卡消费项目】佣金
       3. 特殊情况 卡发生消费也全额退卡，销售人员退还全部佣金
    * 佣金自动发放设置
       * 自动发放的订单类型，自动发放的时间等

7. 商户店铺管理
* 店铺管理
   * 商户管理自己经营的店铺，
* 区域管理
   * 建立自己的区域等级（相当于一个区域组织架构，每一个商户运营者都会不一样）
* 店铺和区域关联
   * 店铺和区域关联
8. 商户控销投放管理（区域代理不同商品，防止恶意竞争，以及销售情况做分析统计。)
  * 按区域类型卖卡
  * 按照店铺类型卖卡

9. 优惠规则设置和商品关联，【商品 见3里面单品和综合商品】）】
   * 优惠券管理
      * 可以向行内申请 不同 的优惠券，全品类，单品类等
      * 全品类券，可以分为：满减券，抵扣券，折扣券
      * 单品类：可以分为：满减券，抵扣券，但是要限定商品品类， 商品
      * 券类型说明
        * 满减券  满多少抵扣，
        * 抵扣券  直接抵扣金额，
        * 折扣券  可以直接打几折，满多少打几折
        * 券规则设置，每一类型的券，都有叠加属性，是否启用叠加，就是一个商品可以使用多张券，  叠加属性开启以后，用户要设置，哪些类型的可以叠加，然后通知【商户管理平台】作风险评估，审核通过后才可启用。 具体使用开运营方业务需求，  【商户管理平台】也推出合理的使用规则，供用户参考。
   * 优惠活动管理 【拓展能力升级】
      * 重大节日和店庆，可以开展活动
      * 活动管理可以设置期限，管理商品，关联优惠，折扣活动如下 场景说明如下
         *  如满多少减多少的固定商品集合。一单多平，如9.9 3件任选
         *  满减消费活动的 商品集合。 哪些商品购买可以参加满减活动
         *  商品折扣商品

10. 售后相关处理
* 售后订单管理，
    * 退货单管理
        *  退货审核完成好，退回券，购款， 不建议支持部分退货
    * 退卡订单管理
        * 针对退卡的审核处理，涉及，卡现金价值计算，退卡手续费用，以及退卡是否产生佣金归还问题
    * 注销申请管理
        * 针对用户发起注销管理， 商户发起注销的管理

11. 数据统计与分析（盈利，收入，精品投放，竞品分析等）
    * 店铺维度统计，区域维度统计 个人销售业绩统计，品类项目统计
    * 综合分析统计，应商户运营方要求根据不同的业务情况去开发相应的图表功能
12. 系统操作说明和指引
13. 商户服务功能（密码修改，服务申诉，资金管理，提现，合约签署，公章管理，日常流水等等）

###  商户管理平台---行内人使用（主要是用来约束商户的）
 *  商户信息管理
    * 主要针对商户信息合规管理，管理商户入驻信息管理和维护

 *  智能合约模版管理
    * 智能合约模版的生成和维护。
    * 不同的业务场景也有不同的合约模版
 * 商户类型管理
    * 商户基础类型维护（用户商户入驻选择类型）
    * 不同类型的商户，填写的信息会不一样，提供经验的资质和材料也不一样
    * 商户类型关联智能合约模版的相关维护，（一个合约模版可以关联多类型商户）当商户在入驻选择类型时，根据类型的业务需求关联其合约
    * 特殊商户直接关联智能合约模版不满足需求情况时（极特殊情况，可能会做定制化模版，商户关联模版是弱关系关联，否则数据ER图会有闭环。）

 * 商户售后处理
   * 用户针对商户发生交易纠纷需要行方介入的售后。
   * 如退卡，注销 用户收款失败的情况。

 * 商户商品商品管理
   * 商户发布商品审核，是否合规，价格是否正常，商品是否有什么敏感信息等。
 * 优惠券管理 
    * 优惠券发放根据商户的申请优惠券，进行发放处理，
    * 优惠券核销处理，券有商户运营方发放和行方发放两种， 具体核销看业务

 * 商户店铺合约保证金管理
   * 针对入驻商户保证金的缴纳，或者拓展运营的补缴，
   * 也可无保证金，随着预付卡增加也可适当扣压部分用户开卡金额，消费后慢慢规范商家等操作
 * 数据分析
   * 经营风险分析---（商户订单，消费情况等，分析商户经营状况等等各种指标，来分析出商户是否有注销风险。
   * 定制化大数据分析---根据商户申请的特殊需求做经营管理分析
   * 针对平台操作数据的分析，优化用户操作和体验，如前端埋点获取用户操作习惯等。
   
  
 

###  权限管理平台
1.平台权限管理
* 权限管理实现，一个平台一个模版记录
* 针对模版记录（平台）创建角色体系和权限体系
* 分配权限， 根据模版记录（平台） 点击某个角色，查询出改模版全部权限体系进行 选择关联角色。
     
2.针对平台
* 商户应用管理平台权限管理
  * 如券的管理审核和发放，
  * 商户保证金管理
  * 商户信息管理
  * 智能合约管理等
  以上管理都需要专业的人去处理，权限自然也不一样。
* 商户管理平台--- 
    * 商户和商户运营使用，权限也是不一样的， 例如运营方可以查看所有商户的销售业绩，商户智能看到自己的一样
    * 而且不同商户之间使用模块也是不一样的。更甚者，商户类型不一样同样的功能 商户操作的页面也是不一样的。

* 其他平台也可以做相依功能对接 一个平台就可以看成一个模版


     


### 针对设想的流程概要（不同功能维度，小程序） 完全依赖上面的设想
#### 核销 流程概要
  * 订单完成之后进入核销流程相关
     * 订单支付完成--》 核销卡 核销卡消费，支付订单付款，优惠券等核销。
     * 订单支付完成--》 核销佣金  订单完成以后对销售人员的分佣管理发放。
     * 发生退货以后---会出现反方向核销的内容，看业务规则。
        * 如离职员工的佣金是否退还
        * 优惠券是否退回--》退回以后优惠券归宿---如到期了是否补发新的券，还是优惠券直接过期处理等，看商家规则
        * 满减消费，是怎么计算退还比例等。看活动规则设置 【见用户活动管理】
      [核销思维导图](https://boardmix.cn/app/editor/NZhiX5F7-PyJXZCzMZpGPQ)
     
 
#### 充值 流程概要
   * 第一步：判断用户是否拥有当前用户是否 已经拥有卡
      * 是（执行第二步）
         直接充值充值成功-----> 生成卡充值数据和订单佣金数据
         充值失败-----> 产生一条待支付订单
      * 否 
         开卡（商户平台4的开卡数据）开卡成功----->进入【是】的流程
        如果开发失败----> 直接结束，通知用户开卡失败
 * 第二步 判断是否有待充值订单
     * 有：提示用户是否继续支付待充值订单--->是——————>去支付页面支付支付成功
     * 否：第二部流程结束
* [简易流程图](https://boardmix.cn/app/editor/sRvrisO9kqoof7_XE07QtA)

####  赠与 流程概要
* 线下赠与实体卡业务--认为是正常持卡（或遗失被他人使用情况）实体卡被赠予，被赠与人是新开卡继承权益。
* 线上赠与--流程1 
  * 选择一张卡片购买和确认赠与---（商户和智能合约发起 卡片是是否可以赠与，卡片是否有带退货资金，是否有带结算服务，是否有冻结等）
  <!-- * 第二步（用户无感知）赠与人（A）的智能合约子钱包加载赠予智能合约限定钱包内的资金仅用赠送， 商户运营机构同步 -->
  * 赠与人（A）输入对方手机号，选择赠与人，然后提交赠与人--》 现在状态赠与人（A）有撤销赠与权限，被赠与人（B）有接受赠与权限，一旦接受被赠与人（B）接受赠与，赠与人（A）无撤销权限  24小不领取自动撤销
  * 被赠予领取操作----输入告知的口令，领取成功 或者直接拒绝领取
  
####  注销 流程概要
   * 是否是实名卡片，如果是，然后退回相应剩余金额参考退卡，【无论是商户还是个人】
   * 如果非实名卡，是赠与和匿名卡时，用户智能注销无法收款，
   *  选择退款钱包 ，验证钱包有效性--》 注销失败换钱包 
   *  执行合约成功---注销失败，失败=》注销无法收款。
   *  合约失败，或其他原因失败走智能合约


####  退卡 流程概要
 * 对于非赠与卡 默认退卡至购卡时的付款钱包
 * 对于赠与卡 需要用户确定退卡的收款钱包 
 * 对于赠与卡和匿名卡，需用用户上传身份证和姓名， 
 * 对于实名卡 需退卡纸同名实名钱包，
 * 退卡有无手续费，有---生产两个订单的，一个退卡订单，一个手续费扣除订单的，无手续费，产生退卡订单‘


 根据核销结果计算剩余价值

[核销思维导图](https://boardmix.cn/app/editor/NZhiX5F7-PyJXZCzMZpGPQ)